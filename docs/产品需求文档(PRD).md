# 网易云音乐评论桌面应用 - 产品需求文档 (PRD)

**文档版本**: v2.0
**最后更新**: 2025-01-02
**当前状态**: ✅ V2版本已完成

---

## 1. 产品概述

### 1.1 产品定位
一个轻量级的 Windows 桌面应用，自动识别网易云音乐当前播放的歌曲，获取真实热门评论并以半透明悬浮窗口展示，适合摸鱼使用。

### 1.2 目标用户
- 网易云音乐重度用户
- 喜欢看歌曲评论的用户
- 希望了解歌曲背景故事的听众
- 摸鱼族（需要低调的桌面应用）

### 1.3 核心价值
- **自动化**: 无需手动操作，自动识别播放歌曲
- **真实性**: 显示真实热门评论，非占位符
- **便捷性**: 悬浮窗口，不干扰工作
- **可玩性**: 评论轮播，持续发现新内容

---

## 2. 功能需求

### 2.1 核心功能（已实现）

#### 2.1.1 自动识别歌曲 ✅
**描述**: 自动识别网易云音乐当前播放的歌曲

**功能点**:
- ✅ 通过窗口标题读取歌曲信息
- ✅ 解析歌曲名和歌手名
- ✅ 每3秒自动检测歌曲切换
- ✅ 最小化时仍正常工作

**验收标准**:
- [x] 能正确识别当前播放歌曲
- [x] 歌曲切换后3秒内自动更新
- [x] 窗口最小化时仍能识别

#### 2.1.2 真实热门评论展示 ✅
**描述**: 获取并展示真实的热门评论

**功能点**:
- ✅ 调用网易云评论API获取热门评论
- ✅ 显示评论内容、用户名、点赞数
- ✅ 支持多条评论缓存
- ✅ 评论按点赞数排序

**验收标准**:
- [x] 能成功获取真实评论（非占位符）
- [x] 显示评论完整内容
- [x] 显示用户名和点赞数
- [x] 支持至少15条热门评论

#### 2.1.3 评论自动轮播 ✅
**描述**: 自动切换显示不同的热门评论

**功能点**:
- ✅ 每8秒自动切换到下一条评论
- ✅ 循环显示所有评论
- ✅ 切换时平滑过渡
- ✅ 支持暂停/恢复（可扩展）

**验收标准**:
- [x] 评论能自动切换
- [x] 切换间隔为8秒
- [x] 切换到末尾后从头开始

#### 2.1.4 半透明悬浮窗口 ✅
**描述**: 以半透明悬浮窗口形式展示

**功能点**:
- ✅ 窗口尺寸：320x200（紧凑）
- ✅ 背景透明度：60%不透明
- ✅ 深灰色背景（#333333）
- ✅ 圆角矩形边框
- ✅ 置顶显示

**验收标准**:
- [x] 窗口大小为320x200
- [x] 背景半透明（能看到后面窗口）
- [x] 窗口始终在最上层

#### 2.1.5 窗口交互功能 ✅
**描述**: 支持窗口拖动和最小化

**功能点**:
- ✅ 鼠标左键拖动窗口
- ✅ 双击窗口最小化/还原
- ✅ 右键菜单（最小化、退出）
- ✅ 点击任意内容可拖动

**验收标准**:
- [x] 能拖动窗口到任意位置
- [x] 双击能最小化/还原
- [x] 右键菜单正常工作

#### 2.1.6 歌曲信息显示 ✅
**描述**: 显示当前歌曲的基本信息

**功能点**:
- ✅ 显示歌曲名和歌手
- ✅ 简洁的布局设计
- ✅ 白色文字，清晰可读

**验收标准**:
- [x] 显示歌曲名 - 歌手名
- [x] 文字清晰可读
- [x] 布局简洁美观

---

## 3. 非功能需求

### 3.1 性能需求
- ✅ **启动时间**: < 3秒
- ✅ **响应时间**: 评论切换 < 100ms
- ✅ **内存占用**: < 100MB
- ✅ **CPU占用**: 空闲时 < 1%

### 3.2 可用性需求
- ✅ **易用性**: 无需配置，开箱即用
- ✅ **稳定性**: 连续运行24小时不崩溃
- ✅ **容错性**: API失败后自动重试

### 3.3 兼容性需求
- ✅ **操作系统**: Windows 10/11
- ✅ **Python版本**: 3.10+
- ✅ **网易云音乐**: PC客户端（任意版本）

### 3.4 安全性需求
- ✅ **数据隐私**: 不收集用户数据
- ✅ **网络安全**: 使用HTTPS加密通信
- ✅ **权限要求**: 仅需管理员权限（窗口枚举）

---

## 4. 用户故事

### 4.1 主要用户故事

#### 故事1: 自动发现好歌
**作为** 网易云音乐用户
**我想要** 自动看到当前播放歌曲的热门评论
**以便** 快速了解这首歌为什么受欢迎

**验收标准**:
- ✅ 应用自动识别播放歌曲
- ✅ 显示真实热门评论
- ✅ 评论每8秒自动切换

#### 故事2: 摸鱼看评论
**作为** 办公室职员
**我想要** 一个低调的悬浮窗口显示评论
**以便** 在工作时也能看评论不被发现

**验收标准**:
- ✅ 窗口小而透明（320x200，60%不透明）
- ✅ 可以拖到屏幕任意位置
- ✅ 可以快速最小化

#### 故事3: 发现好评论
**作为** 音乐爱好者
**我想要** 看到多个不同的评论
**以便** 更全面地了解这首歌

**验收标准**:
- ✅ 自动轮播多条评论
- ✅ 显示用户名和点赞数
- ✅ 评论按热度排序

---

## 5. 使用场景

### 5.1 典型场景

#### 场景1: 日常听歌
**前置条件**: 已启动网易云音乐

**操作流程**:
1. 启动应用（需管理员权限）
2. 播放任意歌曲
3. 应用自动识别并显示评论
4. 每8秒自动切换评论
5. 切歌后3秒内自动更新

**预期结果**: 
- ✅ 自动显示当前歌曲评论
- ✅ 评论轮播流畅
- ✅ 切歌后自动更新

#### 场景2: 摸鱼模式
**前置条件**: 正在听歌，老板来了

**操作流程**:
1. 快速双击窗口最小化
2. 等老板走后恢复
3. 继续看评论

**预期结果**:
- ✅ 双击立即最小化
- ✅ 还原后继续轮播
- ✅ 不影响歌曲识别

#### 场景3: 发现好歌
**前置条件**: 听到一首好听的歌

**操作流程**:
1. 看到热门评论点赞数很高
2. 评论内容很有意思
3. 决定收藏这首歌

**预期结果**:
- ✅ 显示真实评论
- ✅ 点赞数准确
- ✅ 内容有吸引力

---

## 6. 界面设计

### 6.1 窗口布局

```
┌──────────────────────────┐
│                          │
│ 浪人情歌 - 伍佰          │  16px, 白色, 加粗
│                          │
│ 这首歌太好听了...        │  14px, 白色
│ 每次听都很有感触         │
│                          │
│         ↑                │
│       弹性空间            │
│         ↓                │
│    用户名 · 127  ▶       │  12px, 白色, 右对齐
└──────────────────────────┘
320 x 200
```

### 6.2 设计规范

**字体大小**:
- 标题（歌曲名）: 16px, 加粗
- 评论内容: 14px, 常规
- 用户名/点赞数: 12px, 常规

**颜色**:
- 所有文字: 白色 (#FFFFFF)
- 背景色: 深灰色 (#333333, 60%不透明)

**间距**:
- 边距: 16px
- 标题与评论: 12px
- 评论与底部: 12px

---

## 7. 验收标准

### 7.1 功能验收

| 功能项 | 验收标准 | 状态 |
|--------|---------|------|
| 歌曲识别 | 能自动识别网易云播放歌曲 | ✅ 通过 |
| 评论获取 | 能获取真实热门评论（≥15条） | ✅ 通过 |
| 评论轮播 | 每8秒自动切换，循环播放 | ✅ 通过 |
| 窗口显示 | 半透明（60%不透明），320x200 | ✅ 通过 |
| 窗口交互 | 支持拖动、双击最小化、右键菜单 | ✅ 通过 |
| 自动更新 | 切歌后3秒内自动更新 | ✅ 通过 |

### 7.2 性能验收

| 指标 | 目标值 | 实际值 | 状态 |
|------|--------|--------|------|
| 启动时间 | < 3秒 | ~2秒 | ✅ 通过 |
| 内存占用 | < 100MB | ~60MB | ✅ 通过 |
| CPU占用 | < 1% | < 1% | ✅ 通过 |

### 7.3 用户体验验收

| 指标 | 标准 | 状态 |
|------|------|------|
| 易用性 | 无需配置，开箱即用 | ✅ 通过 |
| 稳定性 | 连续运行不崩溃 | ✅ 通过 |
| 美观度 | 界面简洁美观 | ✅ 通过 |

---

## 8. 版本规划

### 8.1 V2版本（当前版本 - 已完成）

**发布日期**: 2025-01-02

**核心功能**:
- ✅ 真实热门评论获取（AES+RSA加密）
- ✅ 评论自动轮播（8秒间隔）
- ✅ 半透明背景（60%不透明度）
- ✅ 紧凑窗口布局（320x200）

### 8.2 未来版本规划

#### V3版本（可选）
- [ ] 支持手动切换评论（滚轮或点击）
- [ ] 支持暂停/恢复轮播
- [ ] 添加配置界面
- [ ] 支持自定义窗口大小和透明度

#### V4版本（可选）
- [ ] 支持多音乐平台（QQ音乐、酷狗等）
- [ ] 支持歌词显示
- [ ] 支持评论搜索和筛选
- [ ] 支持评论点赞功能

---

## 9. 限制与说明

### 9.1 当前限制
- ⚠️ **仅支持Windows**: 暂不支持macOS和Linux
- ⚠️ **需要管理员权限**: 窗口枚举需要
- ⚠️ **依赖网易云客户端**: 必须启动网易云
- ⚠️ **需要网络连接**: 获取评论需要网络

### 9.2 使用建议
- 🔧 建议将窗口拖到屏幕边缘
- 🔧 建议关闭网易云音乐的自启动
- 🔧 建议定期清理日志文件

---

## 10. 附录

### 10.1 参考文档
- [技术设计文档 (TDD)](技术设计文档(TDD).md)
- [API接口文档](API接口文档.md)
- [数据字典](数据字典.md)
- [V2版本完成总结](../discuss/2025-01-02_V2版本完成总结.md)

### 10.2 技术参考
- [PyQt6 官方文档](https://www.riverbankcomputing.com/static/Docs/PyQt6/)
- [pycryptodome 文档](https://www.pycryptodome.org/)

---

**文档结束**

最后更新：2025-01-02
